{% extends 'base.html' %}

{% block title %}Employee Management{% endblock %}

{% block content %}

<!-- Top Navbar -->
<nav class="navbar navbar-expand-lg" style="background-color: blue;">
  <div class="container-fluid">
    <a class="navbar-brand text-white" href="#">Navbar</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <!-- Dashboard -->
        <li class="nav-item">
          <a class="nav-link text-white" href="#">Dashboard</a>
        </li>
        <!-- Profile -->
        <li class="nav-item">
          <a class="nav-link text-white" href="/profile">Profile</a>
        </li>
        <!-- Log Out -->
        <li class="nav-item">
          <a class="nav-link text-white" href="/logout">Log Out</a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<!-- Add Employee Form -->
<div class="container mt-5">
  <h2 class="mb-4">Add Employee</h2>
  <form id="employeeForm" class="needs-validation" novalidate>
    <div class="form-group">
      <label for="employeeName">Employee Name:</label>
      <input type="text" class="form-control" id="employeeName" placeholder="Enter employee name" required>
      <div class="invalid-feedback">Please enter employee name.</div>
    </div>
    <div class="form-group">
      <label for="employeeId">Employee ID:</label>
      <input type="number" class="form-control" id="employeeId" placeholder="Enter employee ID" required>
      <div class="invalid-feedback">Please enter employee ID.</div>
    </div>
    <div class="form-group">
      <label for="mobileNo">Mobile No:</label>
      <input type="tel" class="form-control" id="mobileNo" placeholder="Enter mobile number" required>
      <div class="invalid-feedback">Please enter mobile number.</div>
    </div>
    <div class="form-group">
      <label for="email">Email:</label>
      <input type="email" class="form-control" id="email" placeholder="Enter email" required>
      <div class="invalid-feedback">Please enter email.</div>
    </div>
    <button type="submit" class="btn btn-primary">Add Employee</button>
  </form>

  <!-- Employee List -->
  <h2 class="mt-5">Employee List</h2>
  <table class="table table-striped mt-3" id="employeeTable">
    <thead>
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Mobile No.</th>
        <th>Email</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody id="employee-list">
      <!-- Employee list will be displayed here -->
    </tbody>
  </table>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    document.getElementById('employeeForm').addEventListener('submit', function (event) {
      event.preventDefault();

      // Get form data
      const employee = {
        id: document.getElementById('employeeId').value,
        name: document.getElementById('employeeName').value,
        mobileNo: document.getElementById('mobileNo').value,
        email: document.getElementById('email').value
      };

      // Add employee to the table
      addEmployeeToTable(employee);

      // Reset the form
      this.reset();
    });
  });

  function addEmployeeToTable(employee) {
    const employeeList = document.getElementById('employee-list');
    const row = document.createElement('tr');
    row.innerHTML = `
            <td>${employee.id}</td>
            <td>${employee.name}</td>
            <td>${employee.mobileNo}</td>
            <td>${employee.email}</td>
            <td>
                <button class="btn btn-warning btn-sm" onclick="editEmployee(this)">Edit</button>
                <button class="btn btn-danger btn-sm" onclick="deleteEmployee(this)">Delete</button>
            </td>
        `;
    employeeList.appendChild(row);
  }

  function editEmployee(button) {
    const row = button.closest('tr');
    document.getElementById('employeeId').value = row.cells[0].innerText;
    document.getElementById('employeeName').value = row.cells[1].innerText;
    document.getElementById('mobileNo').value = row.cells[2].innerText;
    document.getElementById('email').value = row.cells[3].innerText;

    // Remove the row so it can be updated when the form is resubmitted
    row.remove();
  }

  function deleteEmployee(button) {
    // Remove the row from the table
    button.closest('tr').remove();
  }
</script>
{% endblock %}